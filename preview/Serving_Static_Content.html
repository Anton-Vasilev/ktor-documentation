<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="${builtOn}"><title>Serving Static Contentâ€”Ktor</title><link href="/ktor-documentation/preview/app/v3/app.css" rel="stylesheet"><link rel="shortcut icon" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico" type="image/x-icon"sizes="16x16 32x32"/><link rel="apple-touch-icon" sizes="57x57"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-180x180.png"/><link rel="mask-icon" href="https://resources.jetbrains.com/storage/ui/favicons/apple-mask-icon.svg" color="black"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/><meta name="image" content="${ogMetaImage}"><!-- Open Graph --><meta property="og:title" content="Serving Static Content - Help | Ktor"/><meta property="og:description" content=""/><meta property="og:image" content="${ogMetaImage}"/><meta property="og:site_name" content="Ktor Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="${ogUrl}"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="${ogTwitter}"><meta name="twitter:title" content="Serving Static Content - Help | Ktor"><meta name="twitter:description" content=""><meta name="twitter:creator" content="${ogTwitter}"><meta name="twitter:image:src" content="${ogMetaImage}"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{"@context": "http://schema.org","@type": "WebPage","@id": "${ogUrl}#webpage","url": "${ogUrl}","name": "Serving Static Content - Help | Ktor","description": "","image": "${ogMetaImage}","inLanguage":"en-US"}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{"@type": "WebSite","@id": "${ogUrlRoot}#website","url": "${ogUrlRoot}","name": "Ktor Help"}</script><!-- End Schema.org --></head><body data-id="Serving_Static_Content" data-main-title="Serving Static Content"data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Ktor 1.5.1 Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Serving_Static_Content"id="Serving_Static_Content.md"  >Serving Static Content</h1><p id="35268" >Whether we're creating a website or an HTTP endpoint, many applications need to serve files (such as stylesheets, scripts, images, etc.), While it is certainly possible with Ktor to load the contents of a file and send it in response to a request, given this is such a common functionality, Ktor simplifies the entire process for us with the <code class="code "id="3526c"  >static</code> Feature.</p> <p id="35270" >The first step in defining a static route is to define the path under which the content should be served. For instance, if you want everything under the route <code class="code "id="35274"  >assets</code> to be treated as static content, you need to add the following to your application setup:</p> <div class="code-block"data-lang="kotlin"id="3527c"       >routing {
    static(&quot;assets&quot;) {

    }
}
</div> <p id="35281" >The next step is to define where we want the content to be served from, which can be either</p> <ul class="list _ul" id="35285"   ><li class="list__item" id="35289" ><a href="#folders" id="3528d" >A folder</a></li> <li class="list__item" id="35293" ><a href="#embedded-application-resources" id="35297" >Embedded application resources</a></li></ul> <section class="chapter" ><h2 id="folders" data-toc="Serving_Static_Content#folders" >Folders</h2><p id="352a1" >In order to serve the contents from a folder, we need to specify the folder name using the <code class="code "id="352a5"  >files</code> function. The path is <b id="352a9" class="" >always relative to the application path</b>:</p> <div class="code-block"data-lang="kotlin"id="352b1"       >routing {
    static(&quot;assets&quot;) {
      files(&quot;css&quot;)
    }
}
</div> <p id="352b6" ><code class="code "id="352ba"  >files(&quot;css&quot;)</code> would then allow for any file located in the folder <code class="code "id="352be"  >css</code> to be served as static content under the given URL pattern, which in this case is <code class="code "id="352c2"  >assets</code>. This means that a request to</p> <p id="352c6" ><code class="code "id="352ca"  >/assets/stylesheet.css</code> would serve the file <code class="code "id="352ce"  >/css/stylesheet.css</code></p> <p id="352d2" >We can have as many folders as we like under a single path. For instance the following would also be valid:</p> <div class="code-block"data-lang="kotlin"id="352da"       >routing {
    static(&quot;assets&quot;) {
      files(&quot;css&quot;)
      files(&quot;js&quot;)
    }
}
</div> <section class="chapter" ><h3 id="serving-individual-files" data-toc="Serving_Static_Content#serving-individual-files" >Serving individual files</h3><p id="352e3" >In addition to serving files from folders, we can also specify individuals files we would like to make available by using the <code class="code "id="352e7"  >file</code> function. Optionally this takes a second argument which allows us to map a physical filename to a virtual one:</p> <div class="code-block"data-lang="kotlin"id="352ef"       >routing {
    static(&quot;static&quot;) {
        file(&quot;image.png&quot;)
        file(&quot;random.txt&quot;, &quot;image.png&quot;)
    }
}
</div></section><section class="chapter" ><h3 id="defining-a-default-file" data-toc="Serving_Static_Content#defining-a-default-file" >Defining a default file</h3><p id="352f8" >For a specific path, we can also define the default file to be loaded:</p> <div class="code-block"data-lang="kotlin"id="35300"       >routing {
    static(&quot;assets&quot;) {
      files(&quot;css&quot;)
      default(&quot;index.html&quot;)
    }
}
</div> <p id="35305" >which would cause a request to <code class="code "id="35309"  >/assets/</code> to serve <code class="code "id="3530d"  >index.html</code>.</p></section><section class="chapter" ><h3 id="changing-the-default-root-folder" data-toc="Serving_Static_Content#changing-the-default-root-folder" >Changing the default root folder</h3><p id="35315" >Ktor also provides us the ability to specify a different root folder from where contents is served. This is useful for instance if we want to dynamically define where contents should be served from, or even use absolute paths.</p> <p id="35319" >We can do this by setting the value of the <code class="code "id="3531d"  >staticRootFolder</code> property:</p> <div class="code-block"data-lang="kotlin"id="35325"       >static(&quot;docs&quot;) {
    staticRootFolder = File(&quot;/system/folder/docs&quot;)
    files(&quot;public&quot;)
}
</div> <p id="3532a" >which would then map any request to <code class="code "id="3532e"  >/docs</code> to the physical folder <code class="code "id="35332"  >/system/folder/docs/public</code>.</p></section></section><section class="chapter" ><h2 id="embedded-application-resources" data-toc="Serving_Static_Content#embedded-application-resources" >Embedded Application Resources</h2><p id="3533a" >We can embed content as resources in our applications and serve these using the <code class="code "id="3533e"  >resource</code> and <code class="code "id="35342"  >resources</code> functions:</p> <div class="code-block"data-lang="kotlin"id="3534a"       >static(&quot;assets&quot;) {
    resources(&quot;css&quot;)
}
</div> <p id="3534f" ><code class="code "id="35353"  >resources(&quot;css&quot;)</code> would then allow for any file located under the resource <code class="code "id="35357"  >css</code> to be served as static content under the given URL pattern, which in this case is <code class="code "id="3535b"  >assets</code>. This means that a request to</p> <p id="3535f" ><code class="code "id="35363"  >/assets/stylesheet.cs</code> would serve the file <code class="code "id="35367"  >/css/stylesheet.cs</code></p> <p id="3536b" >We can have as many resources as we like under a single path. For instance the following would also be valid:</p> <div class="code-block"data-lang="kotlin"id="35373"       >routing {
    static(&quot;assets&quot;) {
      resources(&quot;css&quot;)
      resources(&quot;js&quot;)
    }
}
</div> <section class="chapter" ><h3 id="serving-individual-resources" data-toc="Serving_Static_Content#serving-individual-resources" >Serving individual resources</h3><p id="3537c" >In addition to serving files from resources, we can also specify individuals files we would like to make available by using the <code class="code "id="35380"  >resource</code> function. Optionally this takes a second argument which allows us to map a physical filename to a virtual one:</p> <div class="code-block"data-lang="kotlin"id="35388"       >routing {
    static(&quot;static&quot;) {
        resource(&quot;image.png&quot;)
        resource(&quot;random.txt&quot;, &quot;image.png&quot;)
    }
}
</div></section><section class="chapter" ><h3 id="defining-a-default-resource" data-toc="Serving_Static_Content#defining-a-default-resource" >Defining a default resource</h3><p id="35391" >For a specific path, we can also define the default file to be loaded:</p> <div class="code-block"data-lang="kotlin"id="35399"       >routing {
    static(&quot;assets&quot;) {
      resources(&quot;css&quot;)
      defaultResource(&quot;index.html&quot;)
    }
}
</div></section><section class="chapter" ><h3 id="changing-the-default-resource-package" data-toc="Serving_Static_Content#changing-the-default-resource-package" >Changing the default resource package</h3><p id="353a2" >Ktor also provides us the ability to specify a different base resource package from where contents is served.</p> <p id="353a6" >We can do this by setting the value of the <code class="code "id="353aa"  >staticBasePackage</code> property:</p> <div class="code-block"data-lang="kotlin"id="353b2"       >static(&quot;docs&quot;) {
    staticBasePackage = File(&quot;/system/folder/docs&quot;)
    files(&quot;public&quot;)
}
</div></section></section><section class="chapter" ><h2 id="sub-routes" data-toc="Serving_Static_Content#sub-routes" >Sub-routes</h2><p id="353bb" >If we want to have sub-routes, we can nest <code class="code "id="353bf"  >static</code> functions:</p> <div class="code-block"data-lang="kotlin"id="353c7"       >static(&quot;assets&quot;) {
    files(&quot;css&quot;)
    static(&quot;themes&quot;) {
        files(&quot;data&quot;)
    }
}
</div> <p id="353cc" >allowing for <code class="code "id="353d0"  >/assets/themes</code> to load files from the <code class="code "id="353d4"  >/data</code></p></section><section class="chapter" ><h2 id="handling-errors" data-toc="Serving_Static_Content#handling-errors" >Handling errors</h2><p id="353dc" >If the request content is not found, Ktor will automatically respond with a <code class="code "id="353e0"  >404 Not Found</code> HTTP status code. For more information about personalising error handling, please see <a href="status_pages.html" id="353e4" >status pages</a></p></section><section class="chapter" ><h2 id="customising-content-type-header" data-toc="Serving_Static_Content#customising-content-type-header" >Customising Content Type header</h2><p id="353ee" >Ktor automatically looks up the content type of a file based on its extension and sets the appropriate <code class="code "id="353f2"  >Content-Type</code> header. The list of supported MIME types is defined in the <code class="code "id="353f6"  >mimelist.csv</code> resource file located in <code class="code "id="353fa"  >ktor-server-core</code> artifact.</p></section><section class="chapter" ><h2 id="example" data-toc="Serving_Static_Content#example" >Example</h2><p id="35402" >An example application that serves static files using both folders and resources can be found below:</p> <div class="code-block"data-lang="kotlin"id="3540b"      data-disable-link-processing="true" >package io.ktor.snippets.staticcontent

import io.ktor.application.*
import io.ktor.features.*
import io.ktor.html.*
import io.ktor.http.content.*
import io.ktor.routing.*
import kotlinx.html.*
import java.io.*

fun Application.main() {
    install(DefaultHeaders)
    install(CallLogging)
    routing {
        routeFilesystem()
        routeResources()
    }
}

fun Route.routeFilesystem() {
    get(&quot;/&quot;) {
        call.respondHtml {
            head {
                title { +&quot;Ktor: static-content&quot; }
                styleLink(&quot;/static/styles.css&quot;)
                script(src = &quot;/static/script.js&quot;) {}
            }
            body {
                p {
                    +&quot;Hello from Ktor static content sample application&quot;
                }
                p {
                    +&quot;Current directory is ${System.getProperty(&quot;user.dir&quot;)}&quot;
                }
                img(src = &quot;static/image.png&quot;) {
                    onClick = &quot;message('clicked the image')&quot;
                }
            }
        }
    }
    static(&quot;static&quot;) {
        // When running under IDEA make sure that working directory is set to this sample's project folder
        staticRootFolder = File(&quot;files&quot;)
        files(&quot;css&quot;)
        files(&quot;js&quot;)
        file(&quot;image.png&quot;)
        file(&quot;random.txt&quot;, &quot;image.png&quot;)
        default(&quot;index.html&quot;)
    }
    static(&quot;custom&quot;) {
        staticRootFolder = File(&quot;/tmp&quot;) // Establishes a root folder
        files(&quot;public&quot;) // For this to work, make sure you have /tmp/public on your system
        static(&quot;themes&quot;) {
            // services /custom/themes
            files(&quot;data&quot;)
        }
    }
}

fun Route.routeResources() {
    get(&quot;/resources&quot;) {
        call.respondHtml {
            head {
                title { +&quot;Ktor: static-content&quot; }
                styleLink(&quot;/static-resources/styles.css&quot;)
            }
            body {
                p {
                    +&quot;Hello from Ktor static content served from resources, if the background is cornflowerblue&quot;
                }
            }
        }
    }

    static(&quot;static-resources&quot;) {
        resources(&quot;css&quot;)
    }
}</div></section><div class="last-modified">Last modified: 20 November 2020</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"></div></article><div id="disqus_thread"></div></div></section></main></div><script src="/ktor-documentation/preview/app/v3/app.js"></script></body></html>