<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Serving Static Content - Help | Ktor</title><link href="/ktor-documentation/preview/app/v3/app.css" rel="stylesheet"><link rel="shortcut icon" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico" type="image/x-icon"sizes="16x16 32x32"/><link rel="apple-touch-icon" sizes="57x57"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180"href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-180x180.png"/><link rel="mask-icon" href="https://resources.jetbrains.com/storage/ui/favicons/apple-mask-icon.svg" color="black"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo"content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/></head><body data-id="Serving_Static_Content" data-main-title="Serving Static Content"data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"data-breadcrumbs="${breadcrumbs}"><div class="wrapper"><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Ktor 1.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Serving_Static_Content"id="Serving_Static_Content.md"  >Serving Static Content</h1><p id="489c" >Whether we're creating a website or an HTTP endpoint, many applications need to serve files (such as stylesheets, scripts, images, etc.), While it is certainly possible with Ktor to load the contents of a file and send it in response to a request, given this is such a common functionality, Ktor simplifies the entire process for us with the <code class="code "id="489f"  >static</code> Feature.</p> <p id="48a2" >The first step in defining a static route is to define the path under which the content should be served. For instance, if you want everything under the route <code class="code "id="48a5"  >assets</code> to be treated as static content, you need to add the following to your application setup:</p> <div class="code-block"data-lang="kotlin"id="48ab"       >routing {
    static(&quot;assets&quot;) {

    }
}
</div> <p id="48af" >The next step is to define where we want the content to be served from, which can be either</p> <ul class="list _ul" id="48b2"   ><li class="list__item" id="48b5" ><a href="#folders" id="48b8" >A folder</a></li> <li class="list__item" id="48bd" ><a href="#embedded-application-resources" id="48c0" >Embedded application resources</a></li></ul> <section class="chapter" ><h2 id="folders" data-toc="Serving_Static_Content#folders" >Folders</h2><p id="48c8" >In order to serve the contents from a folder, we need to specify the folder name using the <code class="code "id="48cb"  >files</code> function. The path is <b id="48ce" class="" >always relative to the application path</b>:</p> <div class="code-block"data-lang="kotlin"id="48d4"       >routing {
    static(&quot;assets&quot;) {
      files(&quot;css&quot;)
    }
}
</div> <p id="48d8" ><code class="code "id="48db"  >files(&quot;css&quot;)</code> would then allow for any file located in the folder <code class="code "id="48de"  >css</code> to be served as static content under the given URL pattern, which in this case is <code class="code "id="48e1"  >assets</code>. This means that a request to</p> <p id="48e4" ><code class="code "id="48e7"  >/assets/stylesheet.css</code> would serve the file <code class="code "id="48ea"  >/css/stylesheet.css</code></p> <p id="48ed" >We can have as many folders as we like under a single path. For instance the following would also be valid:</p> <div class="code-block"data-lang="kotlin"id="48f3"       >routing {
    static(&quot;assets&quot;) {
      files(&quot;css&quot;)
      files(&quot;js&quot;)
    }
}
</div> <section class="chapter" ><h3 id="serving-individual-files" data-toc="Serving_Static_Content#serving-individual-files" >Serving individual files</h3><p id="48fa" >In addition to serving files from folders, we can also specify individuals files we would like to make available by using the <code class="code "id="48fd"  >file</code> function. Optionally this takes a second argument which allows us to map a physical filename to a virtual one:</p> <div class="code-block"data-lang="kotlin"id="4903"       >routing {
    static(&quot;static&quot;) {
        file(&quot;image.png&quot;)
        file(&quot;random.txt&quot;, &quot;image.png&quot;)
    }
}
</div></section><section class="chapter" ><h3 id="defining-a-default-file" data-toc="Serving_Static_Content#defining-a-default-file" >Defining a default file</h3><p id="490a" >For a specific path, we can also define the default file to be loaded:</p> <div class="code-block"data-lang="kotlin"id="4910"       >routing {
    static(&quot;assets&quot;) {
      files(&quot;css&quot;)
      default(&quot;index.html&quot;)
    }
}
</div> <p id="4914" >which would cause a request to <code class="code "id="4917"  >/assets/</code> to serve <code class="code "id="491a"  >index.html</code>.</p></section><section class="chapter" ><h3 id="changing-the-default-root-folder" data-toc="Serving_Static_Content#changing-the-default-root-folder" >Changing the default root folder</h3><p id="4920" >Ktor also provides us the ability to specify a different root folder from where contents is served. This is useful for instance if we want to dynamically define where contents should be served from, or even use absolute paths.</p> <p id="4923" >We can do this by setting the value of the <code class="code "id="4926"  >staticRootFolder</code> property:</p> <div class="code-block"data-lang="kotlin"id="492c"       >static(&quot;docs&quot;) {
    staticRootFolder = File(&quot;/system/folder/docs&quot;)
    files(&quot;public&quot;)
}
</div> <p id="4930" >which would then map any request to <code class="code "id="4933"  >/docs</code> to the physical folder <code class="code "id="4936"  >/system/folder/docs/public</code>.</p></section></section><section class="chapter" ><h2 id="embedded-application-resources" data-toc="Serving_Static_Content#embedded-application-resources" >Embedded Application Resources</h2><p id="493c" >We can embed content as resources in our applications and serve these using the <code class="code "id="493f"  >resource</code> and <code class="code "id="4942"  >resources</code> functions:</p> <div class="code-block"data-lang="kotlin"id="4948"       >static(&quot;assets&quot;) {
    resources(&quot;css&quot;)
}
</div> <p id="494c" ><code class="code "id="494f"  >resources(&quot;css&quot;)</code> would then allow for any file located under the resource <code class="code "id="4952"  >css</code> to be served as static content under the given URL pattern, which in this case is <code class="code "id="4955"  >assets</code>. This means that a request to</p> <p id="4958" ><code class="code "id="495b"  >/assets/stylesheet.cs</code> would serve the file <code class="code "id="495e"  >/css/stylesheet.cs</code></p> <p id="4961" >We can have as many resources as we like under a single path. For instance the following would also be valid:</p> <div class="code-block"data-lang="kotlin"id="4967"       >routing {
    static(&quot;assets&quot;) {
      resources(&quot;css&quot;)
      resources(&quot;js&quot;)
    }
}
</div> <section class="chapter" ><h3 id="serving-individual-resources" data-toc="Serving_Static_Content#serving-individual-resources" >Serving individual resources</h3><p id="496e" >In addition to serving files from resources, we can also specify individuals files we would like to make available by using the <code class="code "id="4971"  >resource</code> function. Optionally this takes a second argument which allows us to map a physical filename to a virtual one:</p> <div class="code-block"data-lang="kotlin"id="4977"       >routing {
    static(&quot;static&quot;) {
        resource(&quot;image.png&quot;)
        resource(&quot;random.txt&quot;, &quot;image.png&quot;)
    }
}
</div></section><section class="chapter" ><h3 id="defining-a-default-resource" data-toc="Serving_Static_Content#defining-a-default-resource" >Defining a default resource</h3><p id="497e" >For a specific path, we can also define the default file to be loaded:</p> <div class="code-block"data-lang="kotlin"id="4984"       >routing {
    static(&quot;assets&quot;) {
      resources(&quot;css&quot;)
      defaultResource(&quot;index.html&quot;)
    }
}
</div></section><section class="chapter" ><h3 id="changing-the-default-resource-package" data-toc="Serving_Static_Content#changing-the-default-resource-package" >Changing the default resource package</h3><p id="498b" >Ktor also provides us the ability to specify a different base resource package from where contents is served.</p> <p id="498e" >We can do this by setting the value of the <code class="code "id="4991"  >staticBasePackage</code> property:</p> <div class="code-block"data-lang="kotlin"id="4997"       >static(&quot;docs&quot;) {
    staticBasePackage = File(&quot;/system/folder/docs&quot;)
    files(&quot;public&quot;)
}
</div></section></section><section class="chapter" ><h2 id="sub-routes" data-toc="Serving_Static_Content#sub-routes" >Sub-routes</h2><p id="499e" >If we want to have sub-routes, we can nest <code class="code "id="49a1"  >static</code> functions:</p> <div class="code-block"data-lang="kotlin"id="49a7"       >static(&quot;assets&quot;) {
    files(&quot;css&quot;)
    static(&quot;themes&quot;) {
        files(&quot;data&quot;)
    }
}
</div> <p id="49ab" >allowing for <code class="code "id="49ae"  >/assets/themes</code> to load files from the <code class="code "id="49b1"  >/data</code></p></section><section class="chapter" ><h2 id="handling-errors" data-toc="Serving_Static_Content#handling-errors" >Handling errors</h2><p id="49b7" >If the request content is not found, Ktor will automatically respond with a <code class="code "id="49ba"  >404 Not Found</code> HTTP status code. For more information about personalising error handling, please see <a href="status_pages.md" id="49bd" >status pages</a></p></section><section class="chapter" ><h2 id="customising-content-type-header" data-toc="Serving_Static_Content#customising-content-type-header" >Customising Content Type header</h2><p id="49c5" >Ktor automatically looks up the content type of a file based on its extension and sets the appropriate <code class="code "id="49c8"  >Content-Type</code> header. The list of supported MIME types is defined in the <code class="code "id="49cb"  >mimelist.csv</code> resource file located in <code class="code "id="49ce"  >ktor-server-core</code> artifact.</p></section><section class="chapter" ><h2 id="example" data-toc="Serving_Static_Content#example" >Example</h2><p id="49d4" >An example application that serves static files using both folders and resources can be found below:</p> <div class="code-block"data-lang="kotlin"id="49db"      data-disable-link-processing="true" >package io.ktor.samples.staticcontent

import io.ktor.application.*
import io.ktor.features.*
import io.ktor.html.*
import io.ktor.http.content.*
import io.ktor.routing.*
import kotlinx.html.*
import java.io.*

fun Application.main() {
    install(DefaultHeaders)
    install(CallLogging)
    routing {
        routeFilesystem()
        routeResources()
    }
}

fun Route.routeFilesystem() {
    get(&quot;/&quot;) {
        call.respondHtml {
            head {
                title { +&quot;Ktor: static-content&quot; }
                styleLink(&quot;/static/styles.css&quot;)
                script(src = &quot;/static/script.js&quot;) {}
            }
            body {
                p {
                    +&quot;Hello from Ktor static content sample application&quot;
                }
                p {
                    +&quot;Current directory is ${System.getProperty(&quot;user.dir&quot;)}&quot;
                }
                img(src = &quot;static/image.png&quot;) {
                    onClick = &quot;message('clicked the image')&quot;
                }
            }
        }
    }
    static(&quot;static&quot;) {
        // When running under IDEA make sure that working directory is set to this sample's project folder
        staticRootFolder = File(&quot;files&quot;)
        files(&quot;css&quot;)
        files(&quot;js&quot;)
        file(&quot;image.png&quot;)
        file(&quot;random.txt&quot;, &quot;image.png&quot;)
        default(&quot;index.html&quot;)
    }
    static(&quot;custom&quot;) {
        staticRootFolder = File(&quot;/tmp&quot;) // Establishes a root folder
        files(&quot;public&quot;) // For this to work, make sure you have /tmp/public on your system
        static(&quot;themes&quot;) {
            // services /custom/themes
            files(&quot;data&quot;)
        }
    }
}

fun Route.routeResources() {
    get(&quot;/resources&quot;) {
        call.respondHtml {
            head {
                title { +&quot;Ktor: static-content&quot; }
                styleLink(&quot;/static-resources/styles.css&quot;)
            }
            body {
                p {
                    +&quot;Hello from Ktor static content served from resources, if the background is cornflowerblue&quot;
                }
            }
        }
    }

    static(&quot;static-resources&quot;) {
        resources(&quot;css&quot;)
    }
}</div></section><div class="last-modified" data-skip-index="skip">Last modified: 27 August 2020</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/ktor-documentation/preview/app/v3/app.js"></script></body></html>